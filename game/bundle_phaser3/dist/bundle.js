/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "./";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../js/connect_source.js":
/*!*******************************!*\
  !*** ../js/connect_source.js ***!
  \*******************************/
/*! exports provided: GameType, GameID, GameDegree, GameParameters, GameFreeTimes, GameCostPoint, MemberFreeTimes, MemberPoint, MemberTodayPrizesLimit, GateTodayPrizes, MemberPrizesLimit, GatePrizesLimit, MemberFreePrizesLimit, MemberTodayWinPrizes, MemberPrizes, MemberWinFlag, MemberBoardPosition, HighestScore, PlayerID, PlayerSN, GamePlayTimer, GamePauseTimer, PlayScore, PlaySeconds, PauseSeconds, IsLogin, TimeOutFlag, FacebookSharePicture, FacebookShareLink, FacebookShareHashtag, FacebookShareName, FacebookShareCaption, FacebookShareDescription, LineShareText, LineShareLink, AjaxErrorTimes, ShowBoardFlag, GetParamFlag, StatusFlag, StatusText, GatePassScore, SetPreEntranceData, SetEntranceData, SetPreStartData, SetSuccessStartData, SetNoEnoughPoints, SetPreSendScore, SetSuccessScoreData, SetPreSendComment, SetCompleteSendComment, SetPreReBorn, SetSuccessReBorn, SetCompleteReBorn, SetPrePurchaseItem, SetCompletePurchaseItem, SetPreShowRankBoard, SetCompleteShowRankBoard, SetPreCloseRankBoard, SetCompleteCloseRankBoard, SetPreShowDialog, SetCompleteCloseDialog, entranceData, startData, sendScore, sendComment, purchaseItem, timingStart, timingStop, timingPause, timingResume, timeCheck, showBoardDialog, shareViaFacebook, shareViaLine, resetData, reBorn, showMessageModal, showErrorModal, showStartModal, showReloadModal, dialogTemplete, showBoardMessageModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameType\", function() { return GameType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameID\", function() { return GameID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameDegree\", function() { return GameDegree; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameParameters\", function() { return GameParameters; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameFreeTimes\", function() { return GameFreeTimes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameCostPoint\", function() { return GameCostPoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberFreeTimes\", function() { return MemberFreeTimes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberPoint\", function() { return MemberPoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberTodayPrizesLimit\", function() { return MemberTodayPrizesLimit; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GateTodayPrizes\", function() { return GateTodayPrizes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberPrizesLimit\", function() { return MemberPrizesLimit; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GatePrizesLimit\", function() { return GatePrizesLimit; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberFreePrizesLimit\", function() { return MemberFreePrizesLimit; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberTodayWinPrizes\", function() { return MemberTodayWinPrizes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberPrizes\", function() { return MemberPrizes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberWinFlag\", function() { return MemberWinFlag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MemberBoardPosition\", function() { return MemberBoardPosition; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HighestScore\", function() { return HighestScore; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerID\", function() { return PlayerID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerSN\", function() { return PlayerSN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GamePlayTimer\", function() { return GamePlayTimer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GamePauseTimer\", function() { return GamePauseTimer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayScore\", function() { return PlayScore; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlaySeconds\", function() { return PlaySeconds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PauseSeconds\", function() { return PauseSeconds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IsLogin\", function() { return IsLogin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TimeOutFlag\", function() { return TimeOutFlag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FacebookSharePicture\", function() { return FacebookSharePicture; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FacebookShareLink\", function() { return FacebookShareLink; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FacebookShareHashtag\", function() { return FacebookShareHashtag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FacebookShareName\", function() { return FacebookShareName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FacebookShareCaption\", function() { return FacebookShareCaption; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FacebookShareDescription\", function() { return FacebookShareDescription; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LineShareText\", function() { return LineShareText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LineShareLink\", function() { return LineShareLink; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AjaxErrorTimes\", function() { return AjaxErrorTimes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShowBoardFlag\", function() { return ShowBoardFlag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GetParamFlag\", function() { return GetParamFlag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StatusFlag\", function() { return StatusFlag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StatusText\", function() { return StatusText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GatePassScore\", function() { return GatePassScore; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreEntranceData\", function() { return SetPreEntranceData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetEntranceData\", function() { return SetEntranceData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreStartData\", function() { return SetPreStartData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetSuccessStartData\", function() { return SetSuccessStartData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetNoEnoughPoints\", function() { return SetNoEnoughPoints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreSendScore\", function() { return SetPreSendScore; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetSuccessScoreData\", function() { return SetSuccessScoreData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreSendComment\", function() { return SetPreSendComment; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetCompleteSendComment\", function() { return SetCompleteSendComment; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreReBorn\", function() { return SetPreReBorn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetSuccessReBorn\", function() { return SetSuccessReBorn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetCompleteReBorn\", function() { return SetCompleteReBorn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPrePurchaseItem\", function() { return SetPrePurchaseItem; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetCompletePurchaseItem\", function() { return SetCompletePurchaseItem; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreShowRankBoard\", function() { return SetPreShowRankBoard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetCompleteShowRankBoard\", function() { return SetCompleteShowRankBoard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreCloseRankBoard\", function() { return SetPreCloseRankBoard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetCompleteCloseRankBoard\", function() { return SetCompleteCloseRankBoard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetPreShowDialog\", function() { return SetPreShowDialog; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SetCompleteCloseDialog\", function() { return SetCompleteCloseDialog; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"entranceData\", function() { return entranceData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"startData\", function() { return startData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sendScore\", function() { return sendScore; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sendComment\", function() { return sendComment; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"purchaseItem\", function() { return purchaseItem; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timingStart\", function() { return timingStart; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timingStop\", function() { return timingStop; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timingPause\", function() { return timingPause; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timingResume\", function() { return timingResume; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timeCheck\", function() { return timeCheck; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showBoardDialog\", function() { return showBoardDialog; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shareViaFacebook\", function() { return shareViaFacebook; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shareViaLine\", function() { return shareViaLine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"resetData\", function() { return resetData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"reBorn\", function() { return reBorn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showMessageModal\", function() { return showMessageModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showErrorModal\", function() { return showErrorModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showStartModal\", function() { return showStartModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showReloadModal\", function() { return showReloadModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dialogTemplete\", function() { return dialogTemplete; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showBoardMessageModal\", function() { return showBoardMessageModal; });\n/**\r\n * --------------------------\r\n *  前端網頁上的js 變數\r\n * --------------------------\r\n *  var GameType：遊戲模式：normal、ranking、beating\r\n *  var GameID：遊戲Name / 競賽ID\r\n *  var GameDegree：遊戲難度：degree_id\r\n * \r\n * --------------------------\r\n *  連結後端的ajax functions\r\n *   // 非同步設定(true=啟用非同步/false=關閉非同步)\r\n *   // 如果需要發送同步請求，請將此選項設置為false。\r\n *   // 注意，同步請求將鎖住瀏覽器，用戶其它操作必須等待請求完成才可以執行。\r\n * --------------------------\r\n *  entranceData(ASYNC_SETTING)：遊戲入口畫面 return 會員登入(IsLogin=true)、每日免費次數、會員剩餘免費次數、會員持有點數、(通關賽遊玩資格判斷)\r\n *  startData(ASYNC_SETTING)：確認遊玩 進入遊戲前判斷遊玩資格(扣點) return 玩家資料ID & SN 、遊戲參數\r\n *  sendScore(SCORE, PLAYHISTORY, ASYNC_SETTING)：分數&歷程傳送到後端 return 名次(前三名可留言)\r\n *  sendScoreByGetMethod(SCORE, PLAYHISTORY, textStatus)：sendScore傳送逾時時改用get方法\r\n *  sendComment(COMMENT, ASYNC_SETTING)：前三名的留言傳送到後端 return 成功 or 失敗\r\n *  purchaseItem(ITEM, ASYNC_SETTING)：道具購買 return 成功 or 失敗\r\n *  shareViaFacebook()：成功分享到Facebook 加免費次數 return 會員剩餘免費次數\r\n *  shareViaLine()：成功分享到Line 加免費次數 return 會員剩餘免費次數\r\n * \r\n * --------------------------\r\n *  基礎流程functions\r\n * --------------------------\r\n *  timeCheck()：逾時判斷 計時變數++、進入遊戲30秒後，沒有開始遊戲，顯示遊戲已斷線(連線逾時)\r\n *  timingStart()：計時開始 呼叫時機：startData() ajax成功後\r\n *  timingStop()：計時結束 呼叫時機：Game Over\r\n *  timingPause()：計時暫停 呼叫時機：暫停\r\n *  timingResume()：計時恢復 呼叫時機：結束暫停，繼續遊戲\r\n *  showBoardDialog()：顯示 排行榜彈出窗\r\n *  showBoardMessageModal()：跳出上榜留言框(繼續遊玩)\r\n *  showMessageModal(MESSAGE)：跳出一般訊息框(關閉後繼續遊戲)\r\n *  showErrorModal(MESSAGE)：跳出錯誤訊息框(關閉後跳轉回上頁)\r\n *  showStartModal(TITLE, MESSAGE)：跳出獎品狀態訊息框(關閉後繼續遊玩)\r\n *  showReloadModal(MESSAGE)：跳出錯誤訊息框(關閉後重新整理)\r\n *  dialogTemplete(TITLE, MESSAGE, NOTES, NEXTSTEP = '')：彈出窗模板\r\n * \r\n * --------------------------\r\n *  ajax前後執行functions變數名稱\r\n * --------------------------\r\n * PreEntranceData\r\n * setEntranceData\r\n * PreStartData\r\n * successStartData\r\n * noEnoughPoints\r\n * PreSendScore\r\n * successScoreData\r\n * PreSendComment\r\n * PrePurchaseItem\r\n * PreShowRankBoard\r\n * completeShowRankBoard\r\n * PreCloseRankBoard\r\n * completeCloseRankBoard\r\n */\r\n\r\n// 遊戲類型(從網址取值)\r\nvar GameType = '';\r\n// 遊戲ID / 競賽ID(從網址取值)\r\nvar GameID = '';\r\n// 遊戲難度(從網址取值)\r\nvar GameDegree = '';\r\n// 遊戲參數\r\nvar GameParameters = {};\r\n// 每日免費次數\r\nvar GameFreeTimes = 0;\r\n// 遊戲需花費點數\r\nvar GameCostPoint = 0;\r\n// 會員剩餘免費次數\r\nvar MemberFreeTimes = 0;\r\n// 會員持有點數\r\nvar MemberPoint = 0;\r\n// 會員今日獎品數限制\r\nvar MemberTodayPrizesLimit = 0;\r\n// 關卡今日獎品數限制\r\nvar GateTodayPrizes = 0;\r\n// 會員獎品數限制\r\nvar MemberPrizesLimit = 0;\r\n// 關卡獎品數限制\r\nvar GatePrizesLimit = 0;\r\n// 會員免費獎品數限制\r\nvar MemberFreePrizesLimit = 0;\r\n// 會員今日獲得獎品數\r\nvar MemberTodayWinPrizes = 0;\r\n// 會員已獲得獎品數\r\nvar MemberPrizes = 0;\r\n// 會員本次遊戲獲得獎品\r\nvar MemberWinFlag = false;\r\n// 會員本次遊戲獲得名次\r\nvar MemberBoardPosition = 0;\r\n// 會員目前最高分數\r\nvar HighestScore = 0;\r\n// 玩家ID\r\nvar PlayerID = '';\r\n// 玩家SN\r\nvar PlayerSN = '';\r\n// 遊戲遊玩計時器\r\nvar GamePlayTimer = null;\r\n// 遊戲暫停計時器\r\nvar GamePauseTimer = null;\r\n// 遊玩分數\r\nvar PlayScore = 0;\r\n// 遊玩秒數\r\nvar PlaySeconds = 0;\r\n// 暫停秒數\r\nvar PauseSeconds = 0;\r\n// 是否登入(true = 會員, false = 遊客)\r\nvar IsLogin = false;\r\n// 過久沒有開始遊戲(30秒)(先不用)\r\nvar TimeOutFlag = false;\r\n// Facebook分享圖片\r\nvar FacebookSharePicture = '';\r\n// Facebook分享連結\r\nvar FacebookShareLink = 'https://dachuang.tw?openExternalBrowser=1';\r\n// Facebook分享Hashtag\r\nvar FacebookShareHashtag = '#大創遊戲';\r\n// Facebook分享Name\r\nvar FacebookShareName = '大創遊戲';\r\n// Facebook分享標題\r\nvar FacebookShareCaption = '大創遊戲';\r\n// Facebook分享描述\r\nvar FacebookShareDescription = '大創遊戲';\r\n// Line分享文字\r\nvar LineShareText = '大創遊戲\\n';\r\n// Line分享連結\r\nvar LineShareLink = 'https://dachuang.tw?openExternalBrowser=1';\r\n// ajax傳送錯誤計次\r\nvar AjaxErrorTimes = 0;\r\n// 已抓取過排行資料\r\nvar ShowBoardFlag = false;\r\n// 成功抓取到後台參數資料(startData)\r\nvar GetParamFlag = false;\r\n// 過關賽目前獎品狀態flag：(0)正常(1)已達總獎品數(2)已達會員總獲獎次數(3)已達每日獎品數限制(4)已達會員每日獲獎次數(5)已達會員免費獲獎次數\r\nvar StatusFlag = 0;\r\n// 過關賽目前狀態說明\r\nvar StatusText = '';\r\n// 過關分數\r\nvar GatePassScore = 0;\r\n// ajax前置後置functions變數名稱\r\nvar PreEntranceData = { fn: '', context: '' };\r\nvar setEntranceData = { fn: '', context: '' };\r\nvar PreStartData = { fn: '', context: '' };\r\nvar successStartData = { fn: '', context: '' };\r\nvar noEnoughPoints = { fn: '', context: '' };\r\nvar PreSendScore = { fn: '', context: '' };\r\nvar successScoreData = { fn: '', context: '' };\r\nvar PreSendComment = { fn: '', context: '' };\r\nvar completeSendComment = { fn: '', context: '' };\r\nvar PreReBorn = { fn: '', context: '' };\r\nvar successReBorn = { fn: '', context: '' };\r\nvar completeReBorn = { fn: '', context: '' };\r\nvar PrePurchaseItem = { fn: '', context: '' };\r\nvar completePurchaseItem = { fn: '', context: '' };\r\nvar PreShowRankBoard = { fn: '', context: '' };\r\nvar completeShowRankBoard = { fn: '', context: '' };\r\nvar PreCloseRankBoard = { fn: '', context: '' };\r\nvar completeCloseRankBoard = { fn: '', context: '' };\r\nvar PreShowDialog = { fn: '', context: '' };\r\nvar completeCloseDialog = { fn: '', context: '' };\r\n\r\n// 取得網址資料\r\nvar getUrlString = location.href;\r\nvar pageUrl = new URL(getUrlString);\r\nvar splitUrl = pageUrl.pathname.split('/');\r\n// 由網址取得變數值\r\nGameType = (splitUrl[2] !== undefined) ? splitUrl[2] : 'normal';\r\nGameID = (splitUrl[3] !== undefined) ? splitUrl[3] : 0;\r\nGameDegree = pageUrl.searchParams.get('degree');\r\n\r\n// 進入遊戲(未開始遊玩)\r\n$(function() {\r\n    entranceData(false);\r\n});\r\n\r\n/**\r\n * 遊戲入口畫面 return 已登入(IsLogin=true)、每日免費次數、會員剩餘免費次數、會員持有點數、會員已獲得獎品數、(通關賽遊玩資格判斷)\r\n */\r\nfunction entranceData(ASYNC_SETTING = true) {\r\n\r\n    // 前置函式\r\n    if (typeof PreEntranceData.fn === 'function') {\r\n        PreEntranceData.fn.call(PreEntranceData.context);\r\n    }\r\n    $.ajax({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }, // 權限TOKEN\r\n        url: '/game/' + GameType + '/' + GameID + '/entrance', // 網址\r\n        type: 'POST', // 使用 POST 傳送\r\n        async: ASYNC_SETTING, // 非同步設定(true/false)\r\n        success: function(result) { // 傳送成功的 function\r\n            if (result.flag == 'success') {\r\n                // ---------- START【過關賽設置】----------\r\n                // 會員今日獎品數限制\r\n                MemberTodayPrizesLimit = (result.player_today_prizes_limit !== undefined) ? result.player_today_prizes_limit : 0;\r\n                // 關卡今日獎品數限制\r\n                GateTodayPrizes = (result.gate_today_prizes_limit !== undefined) ? result.gate_today_prizes_limit : 0;\r\n                // 會員獎品數限制\r\n                MemberPrizesLimit = (result.player_prizes_limit !== undefined) ? result.player_prizes_limit : 0;\r\n                // 關卡獎品數限制\r\n                GatePrizesLimit = (result.gate_prizes_limit !== undefined) ? result.gate_prizes_limit : 0;\r\n                // 會員免費獎品數限制\r\n                MemberFreePrizesLimit = (result.player_free_prizes_limit !== undefined) ? result.player_free_prizes_limit : 0;\r\n                // 會員今日獲得獎品數\r\n                MemberTodayWinPrizes = (result.player_today_wins !== undefined) ? result.player_today_wins : 0;\r\n                // 會員已獲得獎品數\r\n                MemberPrizes = (result.player_wins !== undefined) ? result.player_wins : 0;\r\n                // 過關分數\r\n                GatePassScore = (result.pass_score !== undefined) ? result.pass_score : 0;\r\n                // 獎品狀態flag(過關賽)\r\n                StatusFlag = (result.status_flag !== undefined) ? result.status_flag : 0;\r\n                // 獎品狀態說明(過關賽)\r\n                StatusText = (result.status_msg !== undefined) ? result.status_msg : '';\r\n                // ---------- END【過關賽設置】----------\r\n\r\n                // 未登入=遊客\r\n                IsLogin = result.loginflag;\r\n\r\n                // 競賽設定免費次數\r\n                GameFreeTimes = (result.free_of_times !== undefined) ? result.free_of_times : 0;\r\n                // 遊戲扣點\r\n                GameCostPoint = (result.use_points !== undefined) ? result.use_points : 0;\r\n                // 會員剩餘免費次數\r\n                MemberFreeTimes = (result.last_play_times !== undefined) ? result.last_play_times : 0;\r\n                // 會員點數\r\n                MemberPoint = result.player_points;\r\n\r\n                // Facebook分享資料\r\n                FacebookShareName = result.fb_share_name;\r\n                FacebookShareLink = result.fb_share_link;\r\n                FacebookSharePicture = result.fb_share_picture;\r\n                FacebookShareCaption = result.fb_share_caption;\r\n                FacebookShareDescription = result.fb_share_description;\r\n                // Line分享資料\r\n                LineShareText = result.line_share_text;\r\n                LineShareLink = result.line_share_link;\r\n\r\n                if (typeof setEntranceData.fn === 'function') {\r\n                    setEntranceData.fn.call(setEntranceData.context);\r\n                }\r\n            } else {\r\n                // 失敗畫面(跳回前一頁)\r\n                showErrorModal(result.msg);\r\n            }\r\n        },\r\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n            showErrorModal('遊戲載入失敗');\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 確認遊玩 進入遊戲前判斷遊玩資格(扣點) return 玩家資料ID & SN 、 遊戲參數\r\n */\r\nfunction startData(ASYNC_SETTING = true) {\r\n    // 重置資料\r\n    resetData();\r\n\r\n    // 前置函式\r\n    if (typeof PreStartData.fn === 'function') {\r\n        PreStartData.fn.call(PreStartData.context);\r\n    }\r\n\r\n    $.ajax({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }, // 權限TOKEN\r\n        url: '/game/' + GameType + '/' + GameID + '/start', // 網址\r\n        data: {\r\n            degree_id: GameDegree // 難度\r\n        },\r\n        type: 'POST', // 使用 POST 傳送\r\n        async: ASYNC_SETTING, // 非同步設定(true/false)\r\n        success: function(result) { // 傳送成功的 function\r\n            if (result.flag == 'success') {\r\n                PlayerID = result.player_id;\r\n                PlayerSN = result.player_sn;\r\n                // 重抓扣除遊玩次數點數後的資料\r\n                MemberFreeTimes = result.last_play_times;\r\n                MemberPoint = result.player_points;\r\n                // 遊戲參數\r\n                GameParameters = result.game_data;\r\n                // 成功抓取遊戲參數\r\n                GetParamFlag = true;\r\n                // 獎品狀態flag(過關賽)\r\n                StatusFlag = (result.status_flag !== undefined) ? result.status_flag : 0;\r\n                // 獎品狀態說明(過關賽)\r\n                StatusText = (result.status_msg !== undefined) ? result.status_msg : '';\r\n\r\n                // 遊戲參數轉為全域變數(動態變數)\r\n                // for (var key in GameParameters) {\r\n                //     window[key] = GameParameters[key];\r\n                // }\r\n\r\n                // 成功執行function\r\n                if (typeof successStartData.fn === 'function') {\r\n                    successStartData.fn.call(successStartData.context);\r\n                }\r\n\r\n                // 遊戲開始計時\r\n                timingStart();\r\n                return;\r\n            }\r\n            // 點數不足\r\n            else if (result.flag == 'no_point') {\r\n                if (typeof noEnoughPoints.fn === 'function') {\r\n                    noEnoughPoints.fn.call(noEnoughPoints.context);\r\n                } else {\r\n                    // 失敗畫面(跳回前一頁)\r\n                    showErrorModal(result.msg);\r\n                }\r\n                return;\r\n            } else {\r\n                // 失敗畫面(跳回前一頁)\r\n                showErrorModal(result.msg);\r\n            }\r\n        },\r\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n            showErrorModal('遊戲資料載入失敗');\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * (METHOD:POST)分數、秒數、參數、歷程 傳送到後端 return 名次\r\n */\r\nfunction sendScore(SCORE, PLAYHISTORY = '', ASYNC_SETTING = true) {\r\n    // 停止計時器\r\n    timingStop();\r\n    // 前置函式\r\n    if (typeof PreSendScore.fn === 'function') {\r\n        PreSendScore.fn.call(PreSendScore.context);\r\n    }\r\n    // 重置前端顯示分數\r\n    PlayScore = 0;\r\n\r\n    // 將變數資料存回json(動態變數)\r\n    // for (var key in GameParameters) {\r\n    //     GameParameters[key] = window[key];\r\n    // }\r\n\r\n    // 加上try cache紀錄前端錯誤碼\r\n    try {\r\n        $.ajax({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n            }, // 權限TOKEN\r\n            url: '/game/' + GameType + '/' + GameID + '/score', // 網址\r\n            data: {\r\n                score: SCORE, // 分數\r\n                playtime: PlaySeconds, // 遊玩秒數\r\n                pausetime: PauseSeconds, // 暫停秒數\r\n                param: GameParameters, // 參數\r\n                check: PLAYHISTORY // 歷程\r\n            },\r\n            type: 'POST', // 使用 POST 傳送\r\n            cache: false,\r\n            async: ASYNC_SETTING, // 非同步設定(true/false)\r\n            timeout: 5000, // 5秒TimeOut\r\n            success: function(result) { // 傳送成功的 function\r\n                if (result.flag) {\r\n                    // 本次遊戲得分(歷程計算後的分數)\r\n                    PlayScore = result.score;\r\n                    // 會員\r\n                    if (IsLogin) {\r\n                        // 會員歷史最高分(抓資料庫)\r\n                        HighestScore = result.height_score;\r\n                        // 會員本次名次\r\n                        MemberBoardPosition = (result.board_position !== undefined) ? result.board_position : false;\r\n                        // 會員本次是否獲獎\r\n                        MemberWinFlag = (result.win_prize !== undefined) ? result.win_prize : false;\r\n                        // 會員今日獲得獎品數\r\n                        MemberTodayWinPrizes = (result.player_today_wins !== undefined) ? result.player_today_wins : 0;\r\n                        // 會員已獲得獎品數\r\n                        MemberPrizes = (result.player_wins !== undefined) ? result.player_wins : 0;\r\n                        // 會員剩餘免費次數\r\n                        MemberFreeTimes = (result.last_play_times !== undefined) ? result.last_play_times : 0;\r\n                        // 獎品限制狀態\r\n                        StatusFlag = (result.status_flag !== undefined) ? result.status_flag : 0;\r\n                        // 獎品限制狀態說明(過關賽)\r\n                        StatusText = (result.status_msg !== undefined) ? result.status_msg : '';\r\n                    } else if (SCORE > HighestScore) {\r\n                        // 遊客在js判斷得出最高分\r\n                        HighestScore = SCORE;\r\n                    }\r\n                    if (typeof successScoreData.fn === 'function') {\r\n                        successScoreData.fn.call(successScoreData.context);\r\n                    }\r\n                } else {\r\n                    // 在Google Sheet上紀錄錯誤資料\r\n                    $.get(\"https://script.google.com/macros/s/AKfycbwDTtXp7iiLkKJHuHufl1JqYPxtdNius5qaeNYzN2jgO3anENuZ/exec\", {\r\n                            gametype: GameType,\r\n                            gameid: GameID,\r\n                            sn: PlayerSN,\r\n                            score: SCORE,\r\n                            playtime: PlaySeconds,\r\n                            check: PLAYHISTORY,\r\n                            errormsg: 'sendScoreMethod return FALSE flag with message:' + result.msg\r\n                        })\r\n                        .done(function(response) {\r\n                            showErrorModal(response);\r\n                        });\r\n                }\r\n            },\r\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n                // 在Google Sheet上紀錄錯誤資料(不跳出訊息)\r\n                $.get(\"https://script.google.com/macros/s/AKfycbwDTtXp7iiLkKJHuHufl1JqYPxtdNius5qaeNYzN2jgO3anENuZ/exec\", {\r\n                    gametype: GameType,\r\n                    gameid: GameID,\r\n                    sn: PlayerSN,\r\n                    score: SCORE,\r\n                    playtime: PlaySeconds,\r\n                    check: PLAYHISTORY,\r\n                    errormsg: textStatus + ': ' + errorThrown + '(ajax error)'\r\n                });\r\n                if (textStatus === \"timeout\") {\r\n                    // 改用Get傳遞\r\n                    sendScoreByGetMethod(SCORE, PLAYHISTORY, textStatus);\r\n                } else {\r\n                    showMessageModal('分數傳送失敗');\r\n                }\r\n            }\r\n        });\r\n    } catch (e) {\r\n        // 在Google Sheet上紀錄錯誤資料\r\n        $.get(\"https://script.google.com/macros/s/AKfycbwDTtXp7iiLkKJHuHufl1JqYPxtdNius5qaeNYzN2jgO3anENuZ/exec\", {\r\n                gametype: GameType,\r\n                gameid: GameID,\r\n                sn: PlayerSN,\r\n                score: SCORE,\r\n                playtime: PlaySeconds,\r\n                check: PLAYHISTORY,\r\n                errormsg: e.message + '(try cache)'\r\n            })\r\n            .done(function(response) {\r\n                showErrorModal(response);\r\n            });\r\n    };\r\n}\r\n\r\n/**\r\n * (METHOD:GET)分數、秒數、參數、歷程 傳送到後端 return 名次\r\n */\r\nfunction sendScoreByGetMethod(SCORE, PLAYHISTORY, errorStatus) {\r\n    $.ajax({\r\n        url: '/game/' + GameType + '/' + GameID + '/resend/score', // 網址\r\n        data: {\r\n            score: SCORE, // 分數\r\n            errorstatus: errorStatus, // 錯誤訊息\r\n            playtime: PlaySeconds, // 遊玩秒數\r\n            pausetime: PauseSeconds, // 暫停秒數\r\n            param: GameParameters, // 參數\r\n            check: PLAYHISTORY // 歷程\r\n        },\r\n        type: 'GET', // 使用 GET 傳送\r\n        cache: false,\r\n        timeout: 60000, // 60秒TimeOut\r\n        success: function(result) { // 傳送成功的 function\r\n            if (result.flag) {\r\n                // 本次遊戲得分(歷程計算後的分數)\r\n                PlayScore = result.score;\r\n                // 會員\r\n                if (IsLogin) {\r\n                    // 會員歷史最高分(抓資料庫)\r\n                    HighestScore = result.height_score;\r\n                    // 會員本次名次\r\n                    MemberBoardPosition = (result.board_position !== undefined) ? result.board_position : false;\r\n                    // 會員本次是否獲獎\r\n                    MemberWinFlag = (result.win_prize !== undefined) ? result.win_prize : false;\r\n                    // 會員今日獲得獎品數\r\n                    MemberTodayWinPrizes = (result.player_today_wins !== undefined) ? result.player_today_wins : 0;\r\n                    // 會員已獲得獎品數\r\n                    MemberPrizes = (result.player_wins !== undefined) ? result.player_wins : 0;\r\n                    // 會員剩餘免費次數\r\n                    MemberFreeTimes = (result.last_play_times !== undefined) ? result.last_play_times : 0;\r\n                    // 獎品限制狀態\r\n                    StatusFlag = (result.status_flag !== undefined) ? result.status_flag : 0;\r\n                    // 獎品限制狀態說明\r\n                    StatusText = (result.status_msg !== undefined) ? result.status_msg : '';\r\n                } else if (SCORE > HighestScore) {\r\n                    // 遊客在js判斷得出最高分\r\n                    HighestScore = SCORE;\r\n                }\r\n                if (typeof successScoreData.fn === 'function') {\r\n                    successScoreData.fn.call(successScoreData.context);\r\n                }\r\n            } else {\r\n                // 在Google Sheet上紀錄錯誤資料\r\n                $.get(\"https://script.google.com/macros/s/AKfycbwDTtXp7iiLkKJHuHufl1JqYPxtdNius5qaeNYzN2jgO3anENuZ/exec\", {\r\n                        gametype: GameType,\r\n                        gameid: GameID,\r\n                        sn: PlayerSN,\r\n                        score: SCORE,\r\n                        playtime: PlaySeconds,\r\n                        check: PLAYHISTORY,\r\n                        errormsg: 'sendScoreByGetMethod return FALSE flag with message:' + result.msg\r\n                    })\r\n                    .done(function(response) {\r\n                        showErrorModal(response);\r\n                    });\r\n            }\r\n        },\r\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n            // 在Google Sheet上紀錄錯誤資料\r\n            $.get(\"https://script.google.com/macros/s/AKfycbwDTtXp7iiLkKJHuHufl1JqYPxtdNius5qaeNYzN2jgO3anENuZ/exec\", {\r\n                    gametype: GameType,\r\n                    gameid: GameID,\r\n                    sn: PlayerSN,\r\n                    score: SCORE,\r\n                    playtime: PlaySeconds,\r\n                    check: PLAYHISTORY,\r\n                    errormsg: 'sendScoreByGetMethod ajax ERROR: ' + textStatus + ': ' + errorThrown\r\n                })\r\n                .done(function(response) {\r\n                    showErrorModal(response);\r\n                });\r\n        }\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * 留言傳送到後端 return 成功 or 失敗\r\n */\r\nfunction sendComment(COMMENT, ASYNC_SETTING = true) {\r\n    // 如果沒有留言就不執行後續程式\r\n    if (COMMENT == null && COMMENT == '') {\r\n        showMessageModal('未填寫留言將使用系統預設文字');\r\n        // 完成留言後呼叫\r\n        if (typeof completeSendComment.fn === 'function') {\r\n            completeSendComment.fn.call(completeSendComment.context);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // 前置函式\r\n    if (typeof PreSendComment.fn === 'function') {\r\n        PreSendComment.fn.call(PreSendComment.context);\r\n    }\r\n\r\n    $.ajax({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }, // 權限TOKEN\r\n        url: '/game/' + GameType + '/' + GameID + '/comment', // 網址\r\n        data: {\r\n            comment: COMMENT // 上榜留言\r\n        },\r\n        type: 'POST', // 使用 POST 傳送\r\n        async: ASYNC_SETTING, // 非同步設定(true/false)\r\n        success: function(result) { // 傳送成功的 function\r\n            if (result.flag) {\r\n                // 成功畫面\r\n                showMessageModal(result.msg);\r\n            } else {\r\n                // 失敗畫面\r\n                showMessageModal(result.msg);\r\n            }\r\n        },\r\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n            showMessageModal('送出留言失敗');\r\n        },\r\n        complete: function(result) { // 無論成功或失敗都呼叫的 function\r\n            // 完成留言後呼叫\r\n            if (typeof completeSendComment.fn === 'function') {\r\n                completeSendComment.fn.call(completeSendComment.context);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 復活 return 成功 or 失敗\r\n */\r\nfunction reBorn(ASYNC_SETTING = true) {\r\n\r\n    // 前置函式\r\n    if (typeof PreReBorn.fn === 'function') {\r\n        PreReBorn.fn.call(PreReBorn.context);\r\n    }\r\n\r\n    $.ajax({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }, // 權限TOKEN\r\n        url: '/game/' + GameType + '/' + GameID + '/reborn', // 網址\r\n        type: 'POST', // 使用 POST 傳送\r\n        async: ASYNC_SETTING, // 非同步設定(true/false)\r\n        success: function(result) { // 傳送成功的 function\r\n            if (result.flag == 'success') {\r\n                MemberPoint = result.player_points;\r\n\r\n                // 成功後呼叫\r\n                if (typeof successReBorn.fn === 'function') {\r\n                    successReBorn.fn.call(successReBorn.context);\r\n                }\r\n            }\r\n            // 點數不足\r\n            else if (result.flag == 'no_point') {\r\n                if (typeof noEnoughPoints.fn === 'function') {\r\n                    noEnoughPoints.fn.call(noEnoughPoints.context);\r\n                } else {\r\n                    // 失敗畫面\r\n                    showErrorModal(result.msg);\r\n                }\r\n            } else {\r\n                // 失敗畫面\r\n                showErrorModal(result.msg);\r\n            }\r\n        },\r\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n            // ajax失敗 / 後端程式出錯\r\n            showMessageModal('操作發生了錯誤，請稍後再試');\r\n        },\r\n        complete: function(result) { // 無論成功或失敗都呼叫的 function\r\n            // 完成購買後呼叫\r\n            if (typeof completeReBorn.fn === 'function') {\r\n                completeReBorn.fn.call(completeReBorn.context);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 道具購買 return 成功 or 失敗\r\n */\r\nfunction purchaseItem(ITEM, ASYNC_SETTING = true) {\r\n\r\n    // 前置函式\r\n    if (typeof PrePurchaseItem.fn === 'function') {\r\n        PrePurchaseItem.fn.call(PrePurchaseItem.context);\r\n    }\r\n\r\n    $.ajax({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }, // 權限TOKEN\r\n        url: '/game/' + GameType + '/' + GameID + '/purchase', // 網址\r\n        type: 'POST', // 使用 POST 傳送\r\n        async: ASYNC_SETTING, // 非同步設定(true/false)\r\n        success: function(result) { // 傳送成功的 function\r\n            if (result.flag) {\r\n                // 成功畫面\r\n                showMessageModal(result.msg);\r\n            } else {\r\n                // 失敗畫面\r\n                showMessageModal(result.msg);\r\n            }\r\n        },\r\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n            showMessageModal('道具購買失敗');\r\n        },\r\n        complete: function(result) { // 無論成功或失敗都呼叫的 function\r\n            // 完成購買後呼叫\r\n            if (typeof completePurchaseItem.fn === 'function') {\r\n                completePurchaseItem.fn.call(completePurchaseItem.context);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 計時開始 呼叫時機：進入遊戲後第一次點擊\r\n */\r\nfunction timingStart() {\r\n    // 重置(避免之前的沒關掉，會變成有兩個時鐘在計時)\r\n    clearInterval(GamePlayTimer);\r\n    clearInterval(GamePauseTimer);\r\n    PlaySeconds = 0;\r\n    PauseSeconds = 0;\r\n    // 計時(遊玩秒數++)\r\n    GamePlayTimer = window.setInterval(timeCheck, 1000);\r\n}\r\n\r\n/**\r\n * 計時結束 呼叫時機：Game Over\r\n */\r\nfunction timingStop() {\r\n    clearInterval(GamePlayTimer);\r\n    clearInterval(GamePauseTimer);\r\n}\r\n\r\n/**\r\n * 計時暫停 呼叫時機：暫停\r\n */\r\nfunction timingPause() {\r\n    // 重置(避免之前的沒關掉，會變成有兩個時鐘在計時)\r\n    clearInterval(GamePlayTimer);\r\n    clearInterval(GamePauseTimer);\r\n    // 計時(暫停秒數++)\r\n    GamePauseTimer = window.setInterval(function() {\r\n        PauseSeconds++;\r\n    }, 1000);\r\n}\r\n\r\n/**\r\n * 計時恢復 呼叫時機：結束暫停，繼續遊戲\r\n */\r\nfunction timingResume() {\r\n    // 重置(避免之前的沒關掉，會變成有兩個時鐘在計時)\r\n    clearInterval(GamePlayTimer);\r\n    clearInterval(GamePauseTimer);\r\n    // 計時(遊玩秒數++)\r\n    GamePlayTimer = window.setInterval(function() {\r\n        PlaySeconds++;\r\n    }, 1000);\r\n}\r\n\r\n/**\r\n * 計時 + 逾時判斷\r\n */\r\nfunction timeCheck() {\r\n    // 進入遊戲30秒未開始遊戲->連線逾時\r\n    if (TimeOutFlag && PlaySeconds > 30) {\r\n        showReloadModal('連線逾時');\r\n    }\r\n    PlaySeconds++;\r\n}\r\n\r\n/**\r\n * 顯示 排行榜彈出窗\r\n */\r\nfunction showBoardDialog() {\r\n\r\n    // 開啟排行榜前置函式\r\n    if (typeof PreShowRankBoard.fn === 'function') {\r\n        PreShowRankBoard.fn.call(PreShowRankBoard.context);\r\n    }\r\n\r\n    // 未抓取過排行資料\r\n    if (!ShowBoardFlag) {\r\n        // $.get('/game/board/' + GameID, function(data) {\r\n        $.get('/game/' + GameType + '/' + GameID + '/board', function(data) {\r\n            ShowBoardFlag = true;\r\n\r\n            // 彈出窗出現前的執行動作(關閉按鈕功能)\r\n            if (typeof PreShowDialog.fn === 'function') {\r\n                PreShowDialog.fn.call(PreShowDialog.context);\r\n            }\r\n            // 插入訊息彈出窗\r\n            $('#dialog').html(data);\r\n            $('#dialogBg').fadeIn(300);\r\n            $('#dialog').removeAttr('class').addClass('animated bounceIn').fadeIn();\r\n            $('html').css('overflow-x', 'hidden');\r\n            $('html').css('overflow-y', 'hidden');\r\n\r\n            // 開啟排行榜後呼叫\r\n            if (typeof completeShowRankBoard.fn === 'function') {\r\n                completeShowRankBoard.fn.call(completeShowRankBoard.context);\r\n            }\r\n        });\r\n    } else {\r\n        // 彈出窗出現前的執行動作(關閉按鈕功能)\r\n        if (typeof PreShowDialog.fn === 'function') {\r\n            PreShowDialog.fn.call(PreShowDialog.context);\r\n        }\r\n        $('#dialogBg').fadeIn(300);\r\n        $('#dialog').removeAttr('class').addClass('animated bounceIn').fadeIn();\r\n        $('html').css('overflow-x', 'hidden');\r\n        $('html').css('overflow-y', 'hidden');\r\n\r\n        // 開啟排行榜後呼叫\r\n        if (typeof completeShowRankBoard.fn === 'function') {\r\n            completeShowRankBoard.fn.call(completeShowRankBoard.context);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 隱藏 排行榜彈出窗\r\n */\r\n$(function() {\r\n    // 關閉排行榜\r\n    $('body').on('click', '.closeRankBoardBtn', function() {\r\n\r\n        let ClickSound = document.getElementById('ClickSound');\r\n        if (ClickSound) {\r\n            // 按鈕發出聲音\r\n            ClickSound.play();\r\n        }\r\n\r\n        // 關閉排行榜前置函式\r\n        if (typeof PreCloseRankBoard.fn === 'function') {\r\n            PreCloseRankBoard.fn.call(PreCloseRankBoard.context);\r\n        }\r\n\r\n        $('#dialogBg').fadeOut(300, function() {\r\n            $('#dialog').removeAttr('class').addClass('animated bounceOutUp').fadeOut();\r\n            $('html').css('overflow-y', 'scroll');\r\n\r\n            // 關閉排行榜後呼叫\r\n            if (typeof completeCloseRankBoard.fn === 'function') {\r\n                completeCloseRankBoard.fn.call(completeCloseRankBoard.context);\r\n            }\r\n            // 彈出窗關閉後的執行動作(開啟按鈕功能)\r\n            if (typeof completeCloseDialog.fn === 'function') {\r\n                completeCloseDialog.fn.call(completeCloseDialog.context);\r\n            }\r\n        });\r\n    });\r\n\r\n    // 送出留言&關閉\r\n    $('body').on('click', '.closeCommentBoardBtn', function() {\r\n\r\n        sendComment($('#comment_text').val());\r\n\r\n        // 不用關閉dailog因為sendComment()的ajax結束後會執行showMessageModal直接取代dailog內容\r\n    });\r\n\r\n    // 關閉彈出窗\r\n    $('body').on('click', '.closeDialogTempleteBtn', function() {\r\n\r\n        $('#dialogBg').fadeOut(300, function() {\r\n            $('#dialog').removeAttr('class').addClass('animated bounceOutUp').fadeOut();\r\n            $('html').css('overflow-y', 'scroll');\r\n            // 彈出窗關閉後的執行動作(開啟按鈕功能)\r\n            if (typeof completeCloseDialog.fn === 'function') {\r\n                completeCloseDialog.fn.call(completeCloseDialog.context);\r\n            }\r\n        });\r\n        // 彈出窗關閉後的後續動作\r\n        let nextStep = $(this).data('next');\r\n\r\n        if (nextStep == 'back') {\r\n            // 回上頁\r\n            window.history.back();\r\n        } else if (nextStep == 'reload') {\r\n            // 重新整理\r\n            window.location.reload();\r\n        }\r\n    });\r\n});\r\n\r\n/**\r\n * Facebook API\r\n */\r\nwindow.fbAsyncInit = function() {\r\n    FB.init({\r\n        appId: '2167431543580390',\r\n        xfbml: true,\r\n        version: 'v5.0'\r\n    });\r\n    FB.AppEvents.logPageView();\r\n};\r\n\r\n(function(d, s, id) {\r\n    var js, fjs = d.getElementsByTagName(s)[0];\r\n    if (d.getElementById(id)) { return; }\r\n    js = d.createElement(s);\r\n    js.id = id;\r\n    js.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n    fjs.parentNode.insertBefore(js, fjs);\r\n}(document, 'script', 'facebook-jssdk'));\r\n\r\n/**\r\n * 分享到Facebook 加免費次數 return 會員剩餘免費次數\r\n */\r\nfunction shareViaFacebook() {\r\n\r\n    FB.ui({\r\n            method: 'share',\r\n            href: FacebookShareLink,\r\n            hashtag: FacebookShareHashtag\r\n        },\r\n        function(response) {\r\n            if (response && !response.error_message) {\r\n                // FB分享成功 \r\n                $.ajax({\r\n                    headers: {\r\n                        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                    }, // 權限TOKEN\r\n                    url: '/game/' + GameType + '/' + GameID + '/sharedviafb', // 網址\r\n                    type: 'POST', // 使用 POST 傳送\r\n                    async: false, // 非同步設定(true/false)\r\n                    success: function(result) { // 傳送成功的 function\r\n                        if (result.flag) {\r\n                            // 重抓免費次數\r\n                            MemberFreeTimes = result.last_play_times;\r\n                            // 成功&重整頁面\r\n                            showReloadModal(result.msg);\r\n                        } else {\r\n                            // 失敗畫面\r\n                            showMessageModal(result.msg);\r\n                        }\r\n                    },\r\n                    error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n                        // ajax失敗 / 後端程式出錯\r\n                        showMessageModal('操作發生了錯誤，請稍後再試');\r\n                    }\r\n                });\r\n            } else {\r\n                showMessageModal('分享失敗');\r\n            }\r\n        }\r\n    );\r\n}\r\n\r\n/**\r\n * 分享到Line 加免費次數 return 會員剩餘免費次數\r\n */\r\nfunction shareViaLine() {\r\n    // 換行字元替換\r\n    LineShareText = LineShareText ? LineShareText.replace(/\\\\n/g, \"\\n\") : '';\r\n    LineShareLink = LineShareLink ? LineShareLink.replace(/\\\\n/g, \"\\n\") : '';\r\n\r\n    let link = 'http://line.naver.jp/R/msg/text/?' + encodeURIComponent(LineShareText) + '%0A' + encodeURIComponent(LineShareLink);\r\n\r\n    // 先紀錄分享，再開分享窗，避免網頁跳開後js停止運作\r\n    $.ajax({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }, // 權限TOKEN\r\n        url: '/game/' + GameType + '/' + GameID + '/sharedvialine', // 網址\r\n        type: 'POST', // 使用 POST 傳送\r\n        async: false, // 非同步設定(true/false)\r\n        success: function(result) { // 傳送成功的 function\r\n            // 另開Line分享窗\r\n            window.open(link, '_blank');\r\n\r\n            if (result.flag) {\r\n                // 重抓免費次數\r\n                MemberFreeTimes = result.last_play_times;\r\n                // 0.5秒後再顯示結果\r\n                setTimeout(function() {\r\n                    // 成功&重整頁面\r\n                    showReloadModal(result.msg);\r\n                }, 500);\r\n            } else {\r\n                showMessageModal(result.msg);\r\n            }\r\n        },\r\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n            // ajax失敗 / 後端程式出錯\r\n            showMessageModal('操作發生了錯誤，請稍後再試');\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 重置資料\r\n */\r\nfunction resetData() {\r\n    // 停止計時器\r\n    timingStop();\r\n    // 重置玩家ID\r\n    PlayerID = '';\r\n    // 重置玩家SN\r\n    PlayerSN = '';\r\n    // 重置遊戲分數\r\n    PlayScore = 0;\r\n    // 重置遊玩秒數\r\n    PlaySeconds = 0;\r\n    // 重置暫停秒數\r\n    PauseSeconds = 0;\r\n    // 重置排行榜抓取flag\r\n    ShowBoardFlag = false;\r\n    // 重置遊戲參數抓取成功flag\r\n    GetParamFlag = false;\r\n    // 重置遊戲過關flag\r\n    MemberWinFlag = false;\r\n}\r\n\r\n/**\r\n * 跳出上榜留言框(繼續遊玩)\r\n */\r\nfunction showBoardMessageModal() {\r\n    // 前三名玩家上榜留言(分數大於0)\r\n    if (IsLogin && PlayScore > 0 && MemberBoardPosition && MemberBoardPosition <= 3) {\r\n        // 插入上榜留言彈出窗\r\n        let str = '<div class=\"commentBox\"><h4>🎉恭喜獲得榜單第' + MemberBoardPosition + '名</h4><hr> 請輸入上榜留言(最多10字)：<br><input type=\"text\" id=\"comment_text\" maxlength=\"10\"><hr><button class=\"closeCommentBoardBtn\">送出留言</button></div>';\r\n\r\n        // 彈出窗出現前的執行動作(關閉按鈕功能)\r\n        if (typeof PreShowDialog.fn === 'function') {\r\n            PreShowDialog.fn.call(PreShowDialog.context);\r\n        }\r\n        // 插入訊息彈出窗\r\n        $('#dialog').html(str);\r\n        $('#dialogBg').fadeIn(300);\r\n        $('#dialog').removeAttr('class').addClass('animated bounceIn').fadeIn();\r\n        $('html').css('overflow-x', 'hidden');\r\n        $('html').css('overflow-y', 'hidden');\r\n    }\r\n}\r\n\r\n/**\r\n * 跳出訊息框(繼續遊玩)\r\n */\r\nfunction showMessageModal(MESSAGE) {\r\n    dialogTemplete('提示', MESSAGE, '關閉後遊戲將繼續執行');\r\n}\r\n\r\n/**\r\n * 跳出訊息框(回上頁)\r\n */\r\nfunction showErrorModal(MESSAGE) {\r\n    dialogTemplete('錯誤', MESSAGE, '關閉頁面將跳轉回上頁', 'back');\r\n}\r\n\r\n/**\r\n * 跳出訊息框(重新整理)\r\n */\r\nfunction showReloadModal(MESSAGE) {\r\n    dialogTemplete('', MESSAGE, '關閉後頁面將重新整理', 'reload');\r\n}\r\n\r\n\r\n/**\r\n * 跳出訊息框(回上頁)\r\n */\r\nfunction showStartModal(TITLE, MESSAGE) {\r\n    dialogTemplete(TITLE, MESSAGE, '關閉後遊戲將繼續執行');\r\n}\r\n\r\n/**\r\n * Dialog彈出窗模板\r\n */\r\nfunction dialogTemplete(TITLE, MESSAGE, NOTES, NEXTSTEP = '') {\r\n\r\n    // 訊息拼接\r\n    let str = '<div class=\"dialogTempleteBox\">';\r\n\r\n    if (TITLE) {\r\n        str += '<h4>' + TITLE + '</h4><hr>';\r\n    }\r\n    str += MESSAGE;\r\n    if (NEXTSTEP == 'back' && (PlayerID || PlayerSN || PlayScore)) {\r\n        str += '<div class=\"playerinfo\">玩家資料：<span>ID(' + PlayerID + ')</span> | <span>SN(' + PlayerSN + ')</span> | <sapn>SCORE(' + PlayScore + ')</sapn></div>';\r\n    }\r\n    str += '<hr><h6>' + NOTES + '</h6><button class=\"closeDialogTempleteBtn\" data-next=\"' + NEXTSTEP + '\">關閉</button></div>';\r\n\r\n    // 彈出窗出現前的執行動作(關閉按鈕功能)\r\n    if (typeof PreShowDialog.fn === 'function') {\r\n        PreShowDialog.fn.call(PreShowDialog.context);\r\n    }\r\n    // 插入訊息彈出窗\r\n    $('#dialog').html(str);\r\n    $('#dialogBg').fadeIn(300);\r\n    $('#dialog').removeAttr('class').addClass('animated bounceIn').fadeIn();\r\n    $('html').css('overflow-x', 'hidden');\r\n    $('html').css('overflow-y', 'hidden');\r\n}\r\n\r\n/**\r\n *  ajax前置後置functions變數內容指定\r\n **/\r\nfunction SetPreEntranceData(assignFunction, context = this) {\r\n    Object.defineProperty(PreEntranceData, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreEntranceData, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n\r\n}\r\n\r\nfunction SetEntranceData(assignFunction, context = this) {\r\n    Object.defineProperty(PreEntranceData, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreEntranceData, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPreStartData(assignFunction, context = this) {\r\n    Object.defineProperty(PreStartData, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreStartData, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetSuccessStartData(assignFunction, context = this) {\r\n    Object.defineProperty(successStartData, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(successStartData, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetNoEnoughPoints(assignFunction, context = this) {\r\n    Object.defineProperty(noEnoughPoints, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(noEnoughPoints, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPreSendScore(assignFunction, context = this) {\r\n    Object.defineProperty(PreSendScore, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreSendScore, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetSuccessScoreData(assignFunction, context = this) {\r\n    Object.defineProperty(successScoreData, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(successScoreData, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPreSendComment(assignFunction, context = this) {\r\n    Object.defineProperty(PreSendComment, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreSendComment, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetCompleteSendComment(assignFunction, context = this) {\r\n    Object.defineProperty(completeSendComment, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(completeSendComment, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPreReBorn(assignFunction, context = this) {\r\n    Object.defineProperty(PreReBorn, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreReBorn, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetSuccessReBorn(assignFunction, context = this) {\r\n    Object.defineProperty(successReBorn, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(successReBorn, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetCompleteReBorn(assignFunction, context = this) {\r\n    Object.defineProperty(completeReBorn, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(completeReBorn, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPrePurchaseItem(assignFunction, context = this) {\r\n    Object.defineProperty(PrePurchaseItem, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PrePurchaseItem, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetCompletePurchaseItem(assignFunction, context = this) {\r\n    Object.defineProperty(completePurchaseItem, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(completePurchaseItem, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPreShowRankBoard(assignFunction, context = this) {\r\n    Object.defineProperty(PreShowRankBoard, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreShowRankBoard, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetCompleteShowRankBoard(assignFunction, context = this) {\r\n    Object.defineProperty(completeShowRankBoard, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(completeShowRankBoard, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPreCloseRankBoard(assignFunction, context = this) {\r\n    Object.defineProperty(PreCloseRankBoard, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreCloseRankBoard, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetCompleteCloseRankBoard(assignFunction, context = this) {\r\n    Object.defineProperty(completeCloseRankBoard, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(completeCloseRankBoard, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetPreShowDialog(assignFunction, context = this) {\r\n    Object.defineProperty(PreShowDialog, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(PreShowDialog, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\nfunction SetCompleteCloseDialog(assignFunction, context = this) {\r\n    Object.defineProperty(completeCloseDialog, 'fn', {\r\n        value: assignFunction,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n    Object.defineProperty(completeCloseDialog, 'context', {\r\n        value: context,\r\n        writable: true,\r\n        enumerable: true,\r\n        configurable: true,\r\n    });\r\n}\r\n\r\n\n\n//# sourceURL=webpack:///../js/connect_source.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../js/connect_source.js */ \"../js/connect_source.js\");\n\n/* * * * phaser 2 * * * */\n\nvar game = new Phaser.Game(450, 800, Phaser.AUTO, 'game');\nvar score;\nvar PlayHistories = '';\nvar timerEvents;\nvar typeNum = 4; // 共有Ｎ種不同類別方塊\n// 遊戲時間\n\nvar timer = 30; // 顏色配對錯誤,懲罰數量\n\nvar punishNum = 4; // 隨機選擇按鈕顏色 {預設:1=true , 0=false}\n\nvar rndColor = 1; // 最多可連續出現同色數量 {預設:3 =最多連續出現3顆同顏色 ,數字越小越難 ,最小1}\n\nvar sameColor = 1; // 定時更改顏色 {預設:0=false , 數字 = 更改秒數}\n\nvar ischange = 5; // 難度時間門檻 {預設:剩下25秒 , 進入LV1}\n\nvar LV1 = 25;\nvar LV2 = 20;\nvar LV3 = 15;\nvar LV4 = 10; // 難度速度門檻 {預設:60 =0.5秒出現一顆}\n\nvar Rate0 = 30;\nvar Rate1 = 25;\nvar Rate2 = 20;\nvar Rate3 = 16;\nvar Rate4 = 13; // 得分數 {預設:1分,lv1 = 2分,lv2 = 5分,lv3 = 10分,lv4 = 15分}    \n\nvar lv0Point = 1;\nvar lv1Point = 1;\nvar lv2Point = 1;\nvar lv3Point = 1;\nvar lv4Point = 1; // 音效\n\nvar soundBgm;\nvar soundStart;\nvar soundStory; // 按鈕\n\nvar playBtn;\nvar FBshare;\nvar LINEshare;\nvar startBtn;\nvar cancleBtn;\nvar rank;\nvar login;\nvar bag;\nvar leaveBtn;\nvar restartBtn;\n/****************** 遊 戲 說 明 【魷魚對對碰】 ******************/\n// 微調games029\n// 五種細菌 -> 四種幾何圖\n// 介面/按鈕微調 其餘大致不變 \n\n/*************************************************************/\n\nvar bootState = {\n  preload: function preload() {\n    var W = Phaser.Math.min(window.outerWidth, window.innerWidth);\n\n    if (W == 0) {\n      // 有些ios判斷 outerWidth == 0\n      W = Phaser.Math.max(window.outerWidth, window.innerWidth);\n    }\n\n    var H = Phaser.Math.min(window.outerHeight, window.innerHeight);\n\n    if (H == 0) {\n      // 有些ios判斷 outerHeight == 0\n      H = Phaser.Math.max(window.outerHeight, window.innerHeight);\n    }\n\n    if (!game.device.desktop) {\n      // 行動裝置調適\n      var scaleX = W / game.width;\n      var scaleY = H / game.height;\n      this.game.scale.scaleMode = Phaser.ScaleManager.USER_SCALE;\n      this.game.scale.setUserScale(scaleX, scaleY);\n    } else {\n      game.scale.pageAlignHorizontally = true;\n      game.scale.pageAlignVertically = true;\n      var scaleY = H / game.height;\n      this.game.scale.scaleMode = Phaser.ScaleManager.USER_SCALE;\n      this.game.scale.setUserScale(1, scaleY);\n    }\n\n    this.game.scale.pageAlignHorizontally = true;\n    this.game.scale.pageAlignVertically = true;\n    game.load.image('loading', '/games/mark/preloader.gif');\n    game.load.image('dauchung', '/games/mark/dauchung.png');\n  },\n  create: function create() {\n    game.state.start('load');\n  }\n};\nvar loadState = {\n  preload: function preload() {\n    game.add.sprite(game.world.centerX, game.world.height * 0.4, 'dauchung').anchor.setTo(0.5);\n    var preloadSprite = game.add.sprite(game.world.centerX - 110, game.world.height * 0.65, 'loading');\n    game.load.setPreloadSprite(preloadSprite); // 加載資源\n\n    game.load.image('mark', '/games/mark/mark01.png'); // 浮水印\n\n    game.load.image('cover', '/games/mark/cover01.png'); // 黑色底圖\n\n    game.load.spritesheet('stamp', '/games/mark/stamp.png', 150, 150); // 通關章\n\n    game.load.spritesheet('waiting', '/games/mark/waiting.png', 200, 200); // 倒數三秒進遊戲\n\n    game.load.spritesheet('saving', '/games/mark/saving.png', 300, 300); // 分數儲存中\n\n    game.load.image('logo', '/games/games029/assets/logo.png');\n    game.load.image('menu', '/games/games029/assets/menu.png');\n    game.load.image('background', '/games/games029/assets/background.png');\n    game.load.image('win', '/games/games029/assets/win.png');\n    game.load.image('fail', '/games/games029/assets/fail.png');\n    game.load.image('teach', '/games/games029/assets/teach.png'); //下方按鈕組\n\n    game.load.spritesheet('colors', '/games/games029/assets/colors.png', 153, 146); //上方方塊組\n\n    game.load.spritesheet('geoms', '/games/games029/assets/geoms.png', 108, 108);\n    game.load.image('banner', '/games/games029/assets/banner.png');\n    game.load.image('freebanner', '/games/games029/assets/freebanner.png');\n    game.load.image('costbanner', '/games/games029/assets/costbanner.png');\n    game.load.image('tipsbanner', '/games/games029/assets/tipsbanner.png');\n    game.load.image('scorebanner', '/games/games029/assets/scorebanner.png');\n    game.load.image('startBtn', '/games/games029/assets/startBtn.png');\n    game.load.image('cancleBtn', '/games/games029/assets/cancleBtn.png');\n    game.load.image('restartBtn', '/games/games029/assets/restartBtn.png');\n    game.load.image('storeBtn', '/games/games029/assets/storeBtn.png');\n    game.load.image('bagBtn', '/games/games029/assets/bagBtn.png');\n    game.load.image('okBtn', '/games/games029/assets/okBtn.png');\n    game.load.image('login', '/games/games029/assets/login.png');\n    game.load.image('rank', '/games/games029/assets/rank.png');\n    game.load.image('bag', '/games/games029/assets/bag.png');\n    game.load.spritesheet('LINEshare', '/games/games029/assets/LINEshare.png', 40, 40, 2);\n    game.load.spritesheet('FBshare', '/games/games029/assets/FBshare.png', 40, 40, 2);\n    game.load.bitmapFont('BMFont_White', '/games/Font/BMFont_White.png', '/games/Font/BMFont_White.fnt');\n    game.load.bitmapFont('BMFont_Black', '/games/Font/BMFont_Black.png', '/games/Font/BMFont_Black.fnt');\n    game.load.audio('bgm', '/games/games029/assets/audio/bgm.mp3');\n    game.load.audio('click', '/games/games029/assets/audio/click.mp3');\n    game.load.audio('start', '/games/games029/assets/audio/start.mp3');\n    game.load.audio('story', '/games/games029/assets/audio/story.mp3');\n    game.load.audio('correct', '/games/games029/assets/audio/correct.mp3');\n    game.load.audio('error', '/games/games029/assets/audio/error.mp3');\n    game.load.audio('dead', '/games/games029/assets/audio/dead.mp3');\n  },\n  create: function create() {\n    game.stage.disableVisibilityChange = true; // 離開畫面遊戲繼續\n    // 綁定connect.js功能\n\n    Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"SetPreShowDialog\"])(PreShowDialog);\n    Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"SetCompleteCloseDialog\"])(completeCloseDialog);\n    Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"SetSuccessStartData\"])(successStartData);\n    Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"SetSuccessScoreData\"])(successScoreData);\n    game.state.start('menu');\n  }\n}; // 遊戲介面\n\nvar gameState = {\n  init: function init() {\n    score = 0;\n    PlayHistories = ''; // 驗證\n\n    A = 0;\n    B = 0;\n    C = 0;\n    D = 0;\n    E = 0;\n  },\n  create: function create() {\n    soundStart.fadeOut(1000);\n    soundStory.fadeOut(1000);\n    this.gameIsOver = false;\n    game.add.image(0, 0, 'background');\n\n    if (!_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"IsLogin\"]) {\n      game.add.sprite(0, 0, 'mark');\n    }\n\n    soundBgm = game.add.sound('bgm', 0.7, true);\n    soundBgm.play();\n    game.add.text(12, 10, 'ID: ' + _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"PlayerID\"], {\n      fill: '#888',\n      fontSize: \"12px\"\n    });\n    game.add.text(10, 25, 'SN: ' + _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"PlayerSN\"], {\n      fill: '#888',\n      fontSize: \"12px\"\n    });\n    this.currentTime = timer;\n    this.passedTime = 0;\n    game.add.bitmapText(30, 55, 'BMFont_Black', 'ＴＩＭＥ', 14);\n    game.add.bitmapText(20, 95, 'BMFont_Black', '00：', 14);\n    this.currentTime = this.currentTime.toString().padStart(2, '0');\n    this.timeText = game.add.bitmapText(90, 95, 'BMFont_Black', this.currentTime, 14);\n    game.add.bitmapText(330, 55, 'BMFont_Black', 'ＳＣＯＲＥ', 14);\n    this.scoreText = game.add.bitmapText(385, 110, 'BMFont_Black', '', 14);\n    this.scoreText.anchor.set(0.5);\n    timerEvents = game.time.events.loop(1000, this.updateCounter, this); // 顏色順序(紅 黃 藍 綠 紫)\n\n    this.arr = [0, 1, 2, 3, 4]; // 按鈕位置(左 中 右)\n\n    this.arrpos = [];\n    this.row = game.add.group(); // 是否隨機取按鈕顏色\n\n    if (rndColor == 1) {\n      for (var i = 0; i < 3; i++) {\n        this.x = this.rnd.between(0, typeNum - 1);\n        this.temp = this.arr[i];\n        this.arr[i] = this.arr[this.x];\n        this.arr[this.x] = this.temp;\n      } // console.log('左:' + this.arr[0] + ' 中:' + this.arr[1] + ' 右:' + this.arr[2]);\n\n    } // 創建按鈕\n\n\n    for (var j = 0; j < 3; j++) {\n      this.arrpos[j] = game.add.image(0, game.world.height, 'colors', this.arr[j]);\n      this.arrpos[j].x = this.arrpos[j].width * (j + 0.95);\n      this.arrpos[j].anchor.setTo(1, 1);\n      this.arrpos[j].inputEnabled = true;\n    }\n\n    this.arrpos[0].events.onInputDown.add(function () {\n      this.press(0);\n    }, this);\n    this.arrpos[1].events.onInputDown.add(function () {\n      this.press(1);\n    }, this);\n    this.arrpos[2].events.onInputDown.add(function () {\n      this.press(2);\n    }, this); // 進入遊戲即預設一些在螢幕上\n\n    for (var key in this.arr) {\n      this.rowCreate();\n      this.rowUpdate(this.row, this.dust);\n    }\n  },\n  update: function update() {\n    if (this.gameIsOver) return;\n    this.level(); // 定時(Rate)出現圖片\n\n    this.passedTime++;\n\n    if (this.passedTime % this.Rate == 0) {\n      this.rowCreate();\n    }\n\n    this.rowUpdate(this.row, this.dust);\n    this.scoreText.setText(score); // 判斷死亡條件\n\n    if (this.row.length >= 13) {\n      this.gameIsOver = true;\n\n      for (var i = 0; i < 3; i++) {\n        this.arrpos[i].inputEnabled = false;\n      }\n\n      gameOver();\n    } // 判斷全部消除\n    else if (this.row.length < 1) {\n        for (var i = 0; i < 2; i++) {\n          this.rowCreate();\n        }\n      }\n  },\n  level: function level() {\n    // 難度門檻\n    if (this.currentTime > LV1) {\n      this.Rate = Rate0;\n      this.point = lv0Point;\n    } else if (this.currentTime <= LV1 && this.currentTime > LV2) {\n      this.Rate = Rate1;\n      this.point = lv1Point;\n    } else if (this.currentTime <= LV2 && this.currentTime > LV3) {\n      this.Rate = Rate2;\n      this.point = lv2Point;\n    } else if (this.currentTime <= LV3 && this.currentTime > LV4) {\n      this.Rate = Rate3;\n      this.point = lv3Point;\n    } else {\n      this.Rate = Rate4;\n      this.point = lv4Point;\n    }\n  },\n  press: function press(n) {\n    if (this.row.getChildAt(this.row.length - 1).frame == this.arr[n]) {\n      PlayAudio('correct', 1);\n      this.row.getChildAt(this.row.length - 1).destroy();\n      this.showPoint(this.arrpos[n]);\n      score = score + this.point; // 驗證\n\n      if (this.currentTime > LV1) {\n        A += 1; // console.log(\"LV0\" + A);\n      } else if (this.currentTime <= LV1 && this.currentTime > LV2) {\n        B += 1; // console.log(\"LV1\" + B);\n      } else if (this.currentTime <= LV2 && this.currentTime > LV3) {\n        C += 1; // console.log(\"LV2\" + C);\n      } else if (this.currentTime <= LV3 && this.currentTime > LV4) {\n        D += 1; // console.log(\"LV3\" + D);\n      } else {\n        E += 1; // console.log(\"LV4\" + E);\n      }\n    } else {\n      PlayAudio('error', 1); // 畫面閃紅\n\n      game.camera.flash(0x330000, 50);\n\n      for (var i = 0; i < punishNum; i++) {\n        this.rowCreate();\n        this.rowUpdate(this.row, this.dust);\n      }\n    }\n  },\n  // 新增幾何圖到row\n  rowCreate: function rowCreate() {\n    this.r = this.rnd.between(0, 2);\n\n    if (this.rn == this.r) {\n      this.exist++;\n\n      if (this.exist > sameColor) {\n        do {\n          this.r = this.rnd.between(0, 2);\n        } while (this.rn == this.r);\n\n        this.exist = 1;\n      }\n    } else {\n      this.exist = 1;\n    }\n\n    this.dust = game.add.image(0, 0, 'geoms', this.arr[this.r]);\n    this.dust.anchor.setTo(0.5, 0.5);\n    this.rx = this.rnd.between(1, 3);\n    this.dust.x = this.world.centerX + 30 * (2 - this.rx);\n    this.dust.y = this.dust.height * 0.7;\n    this.row.add(this.dust);\n    this.rn = this.r;\n  },\n  showPoint: function showPoint(btn) {\n    PlayAudio('correct', 1);\n    var pointText = game.add.text(btn.x - btn.width / 2, btn.y - 180, '+' + this.point, {\n      fontSize: '26px'\n    });\n    pointText.alpha = 1;\n    setTimeout(function () {\n      pointText.alpha = 0;\n    }, 100);\n  },\n  // 刷新時間\n  updateCounter: function updateCounter() {\n    this.currentTime -= 1;\n    this.currentTime = this.currentTime.toString().padStart(2, '0');\n    this.timeText.setText(this.currentTime);\n\n    if (this.currentTime <= 0) {\n      this.gameIsOver = true;\n\n      for (var i = 0; i < 3; i++) {\n        this.arrpos[i].inputEnabled = false;\n      }\n\n      setTimeout(function () {\n        gameOver();\n      }, 300);\n    }\n\n    if (ischange > 0) {\n      this.changeColor(this.currentTime);\n    } // console.log('剩餘時間: ' + this.currentTime)\n    // console.log('刷新速率: ' + this.Rate+' /60 秒')\n\n  },\n  // 刷新幾何圖row\n  rowUpdate: function rowUpdate(row, dust) {\n    for (var i = 0; i < row.length; i++) {\n      if (i == 0) {\n        row.getChildAt(i).y = dust.height * 0.7;\n        continue;\n      } // 新增加的幾何圖座標y在舊幾何圖+50的位置\n\n\n      row.getChildAt(i).y = row.getChildAt(i - 1).y + 50; // 新增加的下降一級(圖層排序)\n\n      row.sendToBack(dust);\n    }\n  },\n  changeColor: function changeColor(time) {\n    var change = time % ischange;\n\n    if (change == 0) {\n      for (var i = 0; i < 3; i++) {\n        var random = this.rnd.between(0, 2);\n        var tempR = this.arr[i];\n        this.arr[i] = this.arr[random];\n        this.arr[random] = tempR;\n      }\n\n      for (var j = 0; j < 3; j++) {\n        this.arrpos[j].frame = this.arr[j];\n      }\n    }\n  }\n}; // 成績結算\n\nfunction gameOver() {\n  game.time.events.remove(timerEvents);\n  soundBgm.fadeOut(1000);\n  PlayAudio('dead', 1);\n  game.add.image(0, 0, 'cover'); // 驗證\n\n  A = A.toString().padStart(2, '0');\n  B = B.toString().padStart(2, '0');\n  C = C.toString().padStart(2, '0');\n  D = D.toString().padStart(2, '0');\n  E = E.toString().padStart(2, '0');\n  PlayHistories = A + B + C + D + E;\n  var endBoard; // 會員 + 過關賽 + 通關\n\n  if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"IsLogin\"] && _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameType\"] == 'beating' && _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"MemberWinFlag\"]) {\n    endBoard = game.add.sprite(game.world.centerX, 0, 'win');\n  } else {\n    endBoard = game.add.sprite(game.world.centerX, 0, 'fail');\n  }\n\n  endBoard.anchor.setTo(0.5);\n  endBoard.angle = -5;\n  var endBoardTween = game.add.tween(endBoard).to({\n    y: game.world.centerY\n  }, 1500, Phaser.Easing.Bounce.Out, true);\n  endBoardTween.onComplete.add(function () {\n    setTimeout(function () {\n      var saving = game.add.sprite(game.world.centerX, game.world.centerY, 'saving');\n      saving.anchor.setTo(0.5);\n      saving.scale.setTo(0.5);\n      saving.animations.add('saving');\n      saving.animations.play('saving', 12, true); // 回傳分數\n\n      Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"sendScore\"])(score, PlayHistories);\n    }, 1200);\n  });\n}\n\n;\nvar menuState = {\n  create: function create() {\n    game.add.image(0, 0, 'menu');\n    var logo = game.add.sprite(game.world.centerX, -80, 'logo');\n    logo.anchor.setTo(0.5, 1);\n    logo.angle = -5;\n    game.add.tween(logo).to({\n      y: 170\n    }, 1000, Phaser.Easing.Bounce.Out, true);\n    playBtn = AddButton(game.world.centerX, game.world.height - 125, 'startBtn', 0.5, 'click');\n    playBtn.onInputUp.add(function () {\n      var tween = game.add.tween(playBtn).to({\n        alpha: 0\n      }, 300, Phaser.Easing.Linear.None, true, 0, 0, false);\n      tween.onComplete.add(function () {\n        if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"IsLogin\"] && _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameType\"] != 'normal') {\n          showBanner();\n        } else {\n          game.state.start('story');\n        }\n      });\n    });\n\n    if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"StatusFlag\"] != 0 && _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"StatusFlag\"] != 5) {\n      Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"showMessageModal\"])(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"StatusText\"]);\n    }\n\n    function showBanner() {\n      var share = game.add.sprite(game.world.width - 90, game.world.height - 60);\n      FBshare = share.addChild(AddButton(0, 0, 'FBshare', 0.5, 'click'));\n      FBshare.onInputUp.add(function () {\n        Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"shareViaFacebook\"])();\n      });\n      LINEshare = share.addChild(AddButton(50, 0, 'LINEshare', 0.5, 'click'));\n      LINEshare.onInputUp.add(function () {\n        Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"shareViaLine\"])();\n      });\n      var board;\n\n      if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"MemberFreeTimes\"] > 0) {\n        board = game.add.sprite(game.world.centerX, game.world.centerY, 'freebanner');\n        board.addChild(game.add.bitmapText(60, 25, 'BMFont_White', _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"MemberFreeTimes\"], 14));\n      } else {\n        board = game.add.sprite(game.world.centerX, game.world.centerY, 'costbanner');\n        board.addChild(game.add.bitmapText(-45, -25, 'BMFont_White', _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameCostPoint\"], 22)).anchor.setTo(1);\n        board.addChild(game.add.bitmapText(70, 22, 'BMFont_White', _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"MemberPoint\"], 14));\n      }\n\n      board.anchor.setTo(0.5);\n      cancleBtn = AddButton(game.world.centerX - 60, game.world.centerY + 115, 'cancleBtn', 0.5, 'correct');\n      cancleBtn.onInputUp.add(function () {\n        setTimeout(function () {\n          startBtn.inputEnabled = false;\n          window.history.back(); // 返回到前頁\n        }, 200);\n      });\n      startBtn = AddButton(game.world.centerX + 60, game.world.centerY + 115, 'okBtn', 0.5, 'click');\n      startBtn.onInputUp.add(function () {\n        game.add.tween(board).to({\n          alpha: 0\n        }, 300, Phaser.Easing.Linear.None, true, 0, 0, false);\n        share.alpha = 0;\n        cancleBtn.inputEnabled = false;\n        setTimeout(function () {\n          if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"MemberFreeTimes\"] > 0 || parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"MemberPoint\"], 10) >= parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameCostPoint\"], 10)) {\n            game.state.start('story');\n          } else {\n            var tipsboard = game.add.sprite(game.world.centerX, game.world.centerY, 'tipsbanner');\n            tipsboard.anchor.setTo(0.5);\n            var backBtn = tipsboard.addChild(AddButton(-60, 115, 'cancleBtn', 0.5, 'click'));\n            backBtn.onInputUp.add(function () {\n              setTimeout(function () {\n                share.alpha = 1;\n                startBtn.inputEnabled = true;\n                cancleBtn.inputEnabled = true;\n                tipsboard.destroy();\n                game.add.tween(board).to({\n                  alpha: 1\n                }, 300, Phaser.Easing.Linear.None, true, 0, 0, false);\n              }, 200);\n            }, 0, 1, 0);\n            var storeBtn = tipsboard.addChild(AddButton(60, 115, 'storeBtn', 0.5, 'click'));\n            storeBtn.onInputUp.add(function () {\n              window.location.replace('/buycoins'); // 連接到儲值頁\n            }, 200);\n          }\n        }, 200);\n      });\n    }\n  }\n};\n\nfunction PlayAudio(music, volume) {\n  var soundFx = game.add.sound(music, volume);\n\n  try {\n    soundFx.play();\n  } catch (e) {}\n}\n\nfunction AddButton(x, y, ImageName, anchor, sound) {\n  var btn = game.add.button(x, y, ImageName, function () {\n    PlayAudio(sound, 1);\n    game.add.tween(btn.scale).to({\n      x: 0.8,\n      y: 0.8\n    }, 100, Phaser.Easing.Bounce.Out, true);\n  }, this, 0, 0, 1);\n  btn.anchor.setTo(anchor);\n  btn.onInputUp.add(function () {\n    btn.inputEnabled = false;\n    game.add.tween(btn.scale).to({\n      x: 1,\n      y: 1\n    }, 100, Phaser.Easing.Bounce.Out, true, 100);\n  }, this);\n  return btn;\n}\n\nvar storyState = {\n  create: function create() {\n    var teach = game.add.sprite(0, 0, 'teach');\n    teach.inputEnabled = true;\n    teach.events.onInputDown.add(function () {\n      teach.inputEnabled = false;\n      PlayAudio('correct', 1); // ajax取得遊戲參數\n\n      Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"startData\"])();\n    }, this);\n  }\n};\nvar overState = {\n  create: function create() {\n    game.add.image(0, 0, 'menu');\n    game.add.text(12, 10, 'ID: ' + _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"PlayerID\"], {\n      fill: '#888',\n      fontSize: \"12px\"\n    });\n    game.add.text(10, 25, 'SN: ' + _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"PlayerSN\"], {\n      fill: '#888',\n      fontSize: \"12px\"\n    });\n    game.add.sprite(game.world.centerX, game.world.centerY, 'scorebanner').anchor.setTo(0.5);\n    score = score.toString(); // 原型態(number)=0 的時候bitmapText無法顯示\n\n    game.add.bitmapText(game.world.centerX + 30, game.world.centerY - 70, 'BMFont_White', score, 20);\n    var stamp = game.add.sprite(game.world.centerX + 70, game.world.centerY - 80, 'stamp');\n    stamp.alpha = 0;\n\n    if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"IsLogin\"] && _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameType\"] == 'beating' && _js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"MemberWinFlag\"]) {\n      setTimeout(function () {\n        stamp.alpha = 1;\n        var stampAni = stamp.animations.add('play', [0, 1, 2, 3, 4, 5, 6, 7, 8]);\n        stamp.animations.play('play', 12); // 跳出上榜留言框\n\n        stampAni.onComplete.add(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"showBoardMessageModal\"], this);\n      }, 400);\n    } else if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameType\"] == 'ranking') {\n      setTimeout(function () {\n        Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"showBoardMessageModal\"])(); // 跳出上榜留言框\n      }, 400);\n    }\n\n    leaveBtn = AddButton(game.world.centerX - 60, game.world.centerY + 115, 'cancleBtn', 0.5, 'correct');\n    leaveBtn.onInputUp.add(function () {\n      restartBtn.inputEnabled = false;\n      setTimeout(function () {\n        window.history.back(); // 返回到前頁\n      }, 200);\n    });\n    restartBtn = AddButton(game.world.centerX + 60, game.world.centerY + 115, 'restartBtn', 0.5, 'click');\n    restartBtn.onInputUp.add(function () {\n      stamp.alpha = 0;\n      leaveBtn.inputEnabled = false;\n      setTimeout(function () {\n        game.state.start('menu');\n      }, 200);\n    }); // 遊客模式\n\n    if (!_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"IsLogin\"]) {\n      game.add.sprite(0, 0, 'mark');\n      login = AddButton(game.world.centerX + 110, game.world.centerY - 140, 'login', 0.5, 'correct');\n      login.onInputUp.add(function () {\n        setTimeout(function () {\n          window.location.replace('/member/login?redirect_url=/'); // 登入後跳轉到首頁\n        }, 200);\n      });\n    } // 會員模式\n    else {\n        // 過關賽\n        if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameType\"] == 'beating') {\n          bag = AddButton(game.world.centerX + 110, game.world.centerY - 140, 'bag', 0.5, 'correct');\n          bag.onInputUp.add(function () {\n            setTimeout(function () {\n              window.location.replace('/member/pocket'); // 連接到商城頁-背包\n            }, 200);\n          });\n        } // 排行賽\n        else if (_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameType\"] == 'ranking') {\n            rank = AddButton(game.world.centerX + 110, game.world.centerY - 140, 'rank', 0.5, 'correct');\n            rank.onInputUp.add(function () {\n              setTimeout(function () {\n                Object(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"showBoardDialog\"])();\n              }, 200);\n            });\n          }\n      }\n  }\n};\n/*************** 加入state ******************/\n\ngame.state.add('boot', bootState);\ngame.state.add('load', loadState);\ngame.state.add('game', gameState);\ngame.state.add('menu', menuState);\ngame.state.add('story', storyState);\ngame.state.add('over', overState);\ngame.state.start('boot');\n/********************************************/\n// startData 回傳成功\n\nfunction successStartData() {\n  timer = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].timer);\n  punishNum = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].punishNum);\n  rndColor = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].rndColor);\n  sameColor = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].sameColor);\n  ischange = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].ischange);\n  LV1 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].LV1);\n  LV2 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].LV2);\n  LV3 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].LV3);\n  LV4 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].LV4);\n  Rate0 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].Rate0);\n  Rate1 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].Rate1);\n  Rate2 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].Rate2);\n  Rate3 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].Rate3);\n  Rate4 = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].Rate4);\n  lv0Point = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].lv0Point);\n  lv1Point = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].lv1Point);\n  lv2Point = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].lv2Point);\n  lv3Point = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].lv3Point);\n  lv4Point = parseInt(_js_connect_source_js__WEBPACK_IMPORTED_MODULE_0__[\"GameParameters\"].lv4Point); // console.log('遊戲時間: ' + timer);\n  // console.log('懲罰數量: ' + punishNum);\n  // console.log('隨機選擇按鈕顏色 {預設:1=true , 0=false}: ' + rndColor);\n  // console.log('最多可連續出現同色數量: ' + sameColor);\n  // console.log('剩餘時間門檻(LV1): ' + LV1);\n  // console.log('剩餘時間門檻(LV2): ' + LV2);\n  // console.log('剩餘時間門檻(LV3): ' + LV3);\n  // console.log('剩餘時間門檻(LV4): ' + LV4);\n  // console.log('速度門檻(預設): ' + Rate0);\n  // console.log('速度門檻(LV1): ' + Rate1);\n  // console.log('速度門檻(LV2): ' + Rate2);\n  // console.log('速度門檻(LV3): ' + Rate3);\n  // console.log('速度門檻(LV4): ' + Rate4);\n  // console.log('得分數(預設): ' + lv0Point);\n  // console.log('得分數(LV1): ' + lv1Point);\n  // console.log('得分數(LV2): ' + lv2Point);\n  // console.log('得分數(LV3): ' + lv3Point);\n  // console.log('得分數(LV4): ' + lv4Point);\n\n  game.state.start('game');\n} // sendScore 回傳成功\n\n\nfunction successScoreData() {\n  setTimeout(function () {\n    game.state.start('over');\n  }, 1500);\n} // 開啟 分享 / 上榜留言框 / 排行榜\n\n\nfunction PreShowDialog() {\n  var btnArray = [playBtn, FBshare, LINEshare, startBtn, cancleBtn, bag, rank, leaveBtn, restartBtn];\n  buttonAction(btnArray, false);\n} // 關閉 分享 / 上榜留言框 / 排行榜\n\n\nfunction completeCloseDialog() {\n  var btnArray = [playBtn, FBshare, LINEshare, startBtn, cancleBtn, bag, rank, leaveBtn, restartBtn];\n  buttonAction(btnArray, true);\n} // 開啟/關閉 按鈕 action=true/false\n\n\nfunction buttonAction(btnArray, action) {\n  for (var i = 0; i < btnArray.length; i++) {\n    if (typeof btnArray[i] !== 'undefined' && btnArray[i].visible === true) {\n      btnArray[i].inputEnabled = action;\n\n      if (typeof btnArray[i].input !== 'undefined') {\n        btnArray[i].input.enabled = action;\n      }\n    }\n  }\n}\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ })

/******/ });